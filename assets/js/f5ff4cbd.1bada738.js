"use strict";(self.webpackChunk_tkeel_docs=self.webpackChunk_tkeel_docs||[]).push([[3431],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=s(n),m=o,k=d["".concat(p,".").concat(m)]||d[m]||c[m]||l;return n?a.createElement(k,r(r({ref:t},u),{},{components:n})):a.createElement(k,r({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,r=new Array(l);r[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:o,r[1]=i;for(var s=2;s<l;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},18987:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=n(87462),o=(n(67294),n(3905));const l={sidebar_position:40,title:"\u524d\u7aef\u63d2\u4ef6\u5f00\u53d1"},r=void 0,i={unversionedId:"develop_guide/plugin_develop/web_develop",id:"develop_guide/plugin_develop/web_develop",title:"\u524d\u7aef\u63d2\u4ef6\u5f00\u53d1",description:"\u672c\u6587\u4e3a\u60a8\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u5f00\u53d1 tKeel \u524d\u7aef\u63d2\u4ef6\u3002",source:"@site/docs/develop_guide/plugin_develop/web_develop.md",sourceDirName:"develop_guide/plugin_develop",slug:"/develop_guide/plugin_develop/web_develop",permalink:"/develop_guide/plugin_develop/web_develop",draft:!1,editUrl:"https://github.com/tkeel-io/docs/tree/main/docs/develop_guide/plugin_develop/web_develop.md",tags:[],version:"current",lastUpdatedAt:1655118660,formattedLastUpdatedAt:"2022\u5e746\u670813\u65e5",sidebarPosition:40,frontMatter:{sidebar_position:40,title:"\u524d\u7aef\u63d2\u4ef6\u5f00\u53d1"},sidebar:"tutorialSidebar",previous:{title:"\u529f\u80fd\u63d2\u4ef6\u5f00\u53d1",permalink:"/develop_guide/plugin_develop/function_develop"},next:{title:"\u63d2\u4ef6\u6253\u5305\u5236\u4f5c\u6307\u5357",permalink:"/develop_guide/plugin_develop/plugin_chart"}},p={},s=[{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:2},{value:"\u9002\u7528\u573a\u666f",id:"\u9002\u7528\u573a\u666f",level:2},{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:2},{value:"\u514b\u9686 tKeel console \u4ed3\u5e93\u5230\u672c\u5730",id:"\u514b\u9686-tkeel-console-\u4ed3\u5e93\u5230\u672c\u5730",level:3},{value:"\u5b89\u88c5 console \u4ed3\u5e93\u7684\u4f9d\u8d56",id:"\u5b89\u88c5-console-\u4ed3\u5e93\u7684\u4f9d\u8d56",level:3},{value:"\u521b\u5efa\u63d2\u4ef6",id:"\u521b\u5efa\u63d2\u4ef6",level:2},{value:"\u5f00\u53d1\u63d2\u4ef6",id:"\u5f00\u53d1\u63d2\u4ef6",level:2},{value:"\u5c06 plugin \u6a21\u62df\u6dfb\u52a0\u81f3 portal \u7684\u83dc\u5355\u4e2d",id:"\u5c06-plugin-\u6a21\u62df\u6dfb\u52a0\u81f3-portal-\u7684\u83dc\u5355\u4e2d",level:3},{value:"\u8fd0\u884c portal",id:"\u8fd0\u884c-portal",level:3},{value:"\u542f\u52a8 plugin \u524d\u7aef",id:"\u542f\u52a8-plugin-\u524d\u7aef",level:3},{value:"portal \u4f20\u9012\u7ed9 plugin \u7684 props",id:"portal-\u4f20\u9012\u7ed9-plugin-\u7684-props",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"React",id:"react",level:3},{value:"Vue.js",id:"vuejs",level:3}],u={toc:s};function c(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u672c\u6587\u4e3a\u60a8\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u5f00\u53d1 tKeel \u524d\u7aef\u63d2\u4ef6\u3002"),(0,o.kt)("h2",{id:"\u4ecb\u7ecd"},"\u4ecb\u7ecd"),(0,o.kt)("p",null,"tKeel \u7684\u6574\u4e2a\u524d\u7aef\u63a7\u5236\u53f0\u5206\u4e3a portal\uff08\u4e5f\u53ef\u4ee5\u88ab\u79f0\u4e3a\u57fa\u5ea7\u3001\u4e3b\u5e94\u7528\uff09\u548c plugin\uff08\u4e5f\u53ef\u4ee5\u88ab\u79f0\u4e3a\u63d2\u4ef6 \u3001\u5b50\u5e94\u7528\u3001\u5fae\u5e94\u7528\uff09\uff0c\u6574\u4e2a\u524d\u7aef\u662f\u4e00\u4e2a\u57fa\u4e8e ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/umijs/qiankun"},"qiankun\uff08\u4e7e\u5764\uff09")," \u7684\u5fae\u524d\u7aef\u67b6\u6784\u7cfb\u7edf\u3002"),(0,o.kt)("p",null,"\u6574\u4e2a tKeel \u63a7\u5236\u53f0\u5206\u4e3a\u300c\u7ba1\u7406\u5e73\u53f0\u300d\u548c\u300c\u79df\u6237/\u7528\u6237\u5e73\u53f0\u300d 2 \u4e2a\u5e73\u53f0\uff0c\u56e0\u6b64 portal \u4e5f\u6709 2 \u4e2a\uff1aadmin ( ",(0,o.kt)("inlineCode",{parentName:"p"},"tkeel-console-portal-admin")," ) \u548c tenant ( ",(0,o.kt)("inlineCode",{parentName:"p"},"tkeel-console-portal-tenant")," )\u3002\u540e\u9762\u82e5\u6ca1\u6709\u8bf4\u660e\u662f admin \u8fd8\u662f tenant \uff0c\u5747\u9ed8\u8ba4\u4e3a tenant \uff0cadmin \u540c\u7406\u3002"),(0,o.kt)("h2",{id:"\u9002\u7528\u573a\u666f"},"\u9002\u7528\u573a\u666f"),(0,o.kt)("h2",{id:"\u524d\u63d0\u6761\u4ef6"},"\u524d\u63d0\u6761\u4ef6"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Node.js >= 16.0.0"),(0,o.kt)("li",{parentName:"ul"},"Yarn >= 3.0.0"),(0,o.kt)("li",{parentName:"ul"},"Google Chrome \u6d4f\u89c8\u5668 >= 96"),(0,o.kt)("li",{parentName:"ul"},"\u9605\u8bfb ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/umijs/qiankun"},"qiankun")," \u6587\u6863")),(0,o.kt)("h3",{id:"\u514b\u9686-tkeel-console-\u4ed3\u5e93\u5230\u672c\u5730"},"\u514b\u9686 tKeel console \u4ed3\u5e93\u5230\u672c\u5730"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"fork \u6211\u4eec\u7684 ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/tkeel-io/console"},"console \u4ed3\u5e93")),(0,o.kt)("li",{parentName:"ul"},"\u514b\u9686\u5230\u672c\u5730"),(0,o.kt)("li",{parentName:"ul"},"\u8fdb\u5165\u672c\u5730\u4ed3\u5e93\u76ee\u5f55")),(0,o.kt)("p",null,"\u6211\u4eec\u7684\u524d\u7aef\u4ed3\u5e93\u4e2d\u5305\u542b portal \u548c\u5b98\u65b9 plugins"),(0,o.kt)("h3",{id:"\u5b89\u88c5-console-\u4ed3\u5e93\u7684\u4f9d\u8d56"},"\u5b89\u88c5 console \u4ed3\u5e93\u7684\u4f9d\u8d56"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"yarn install\n")),(0,o.kt)("h2",{id:"\u521b\u5efa\u63d2\u4ef6"},"\u521b\u5efa\u63d2\u4ef6"),(0,o.kt)("p",null,"plugin \u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u524d\u7aef\u6280\u672f\u6808\u5f00\u53d1\uff0c\u521b\u5efa plugin \u524d\u7aef\u9879\u76ee\u53ea\u9700\u6309\u7167 qiankun \u7684 ",(0,o.kt)("a",{parentName:"p",href:"https://qiankun.umijs.org/zh/guide/getting-started"},"\u5feb\u901f\u4e0a\u624b")," \u5373\u53ef\u3002"),(0,o.kt)("h2",{id:"\u5f00\u53d1\u63d2\u4ef6"},"\u5f00\u53d1\u63d2\u4ef6"),(0,o.kt)("h3",{id:"\u5c06-plugin-\u6a21\u62df\u6dfb\u52a0\u81f3-portal-\u7684\u83dc\u5355\u4e2d"},"\u5c06 plugin \u6a21\u62df\u6dfb\u52a0\u81f3 portal \u7684\u83dc\u5355\u4e2d"),(0,o.kt)("p",null,"\u5728 console \u4ed3\u5e93\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"packages/tkeel-console-portal-tenant/config/")," \u4e2d\uff0c\u521b\u5efa ",(0,o.kt)("inlineCode",{parentName:"p"},"local-development.js")," \u6587\u4ef6\uff0c\u5e76\u5728\u5176\u4e2d\u6dfb\u52a0 plugin \u7684 mock \u6570\u636e\uff1a"),(0,o.kt)("p",null,"\u63d2\u4ef6\u5728\u4e00\u7ea7\u83dc\u5355"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  mock: {\n    menus: [\n      {\n        id: 'id',\n        name: 'name',\n        icon: 'icon',\n        path: '/path', // \u5bf9\u5e94\u63d2\u4ef6\u4e2d\u8def\u7531\u7684 base\uff0c\u6bd4\u5982 react-router \u4e2d\u7684 basename\n        entry: 'entry', // \u5bf9\u7528\u63d2\u4ef6\u7684\u8bbf\u95ee\u5730\u5740\uff0c\u6bd4\u5982 http://127.0.0.1:3002/static/devices\n      },\n    ],\n  },\n};\n")),(0,o.kt)("p",null,"\u63d2\u4ef6\u5728\u4e8c\u7ea7\u83dc\u5355"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  mock: {\n    menus: [\n      {\n        id: 'parentId',\n        name: 'parentName',\n        icon: 'parentIcon',\n        children: [\n          {\n            id: 'id',\n            name: 'name',\n            path: '/path', // \u5bf9\u5e94\u63d2\u4ef6\u4e2d\u8def\u7531\u7684 base\uff0c\u6bd4\u5982 react-router \u4e2d\u7684 basename\n            entry: 'entry', // \u5bf9\u7528\u63d2\u4ef6\u7684\u8bbf\u95ee\u5730\u5740\uff0c\u6bd4\u5982 http://127.0.0.1:3002/static/devices\n          },\n        ],\n      },\n    ],\n  },\n};\n")),(0,o.kt)("h3",{id:"\u8fd0\u884c-portal"},"\u8fd0\u884c portal"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"build \u79df\u6237/\u7528\u6237\u5e73\u53f0\u7684 portal")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"yarn build:development:portal-tenant\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"\u8fd0\u884c\u79df\u6237/\u7528\u6237\u5e73\u53f0\u7684 portal")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"yarn start:portal-tenant\n")),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"\u5728 Google Chrome \u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee ",(0,o.kt)("a",{parentName:"li",href:"http://127.0.0.1:3001"},"http://127.0.0.1:3001"))),(0,o.kt)("h3",{id:"\u542f\u52a8-plugin-\u524d\u7aef"},"\u542f\u52a8 plugin \u524d\u7aef"),(0,o.kt)("p",null,"\u5c06 plugin \u524d\u7aef\u4f5c\u4e3a\u9759\u6001\u670d\u52a1\u542f\u52a8\uff0c\u7531\u4e8e portal \u7684\u672c\u5730\u670d\u52a1\u7aef\u53e3\u4e3a ",(0,o.kt)("inlineCode",{parentName:"p"},"3000")," \u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"3001"),"\uff0c\u6240\u4ee5\u6700\u597d\u5c06 plugin \u7684\u7aef\u53e3\u8bbe\u4e3a\u5176\u4ed6\u503c\u3002"),(0,o.kt)("h3",{id:"portal-\u4f20\u9012\u7ed9-plugin-\u7684-props"},"portal \u4f20\u9012\u7ed9 plugin \u7684 props"),(0,o.kt)("p",null,"portal \u4f1a\u5728\u6ce8\u518c plugin\uff08",(0,o.kt)("inlineCode",{parentName:"p"},"registerMicroApps"),"\uff09\u65f6\uff0c\u901a\u8fc7 ",(0,o.kt)("inlineCode",{parentName:"p"},"props")," \u4f20\u9012\u7ed9 plugin \u4e00\u4e2a ",(0,o.kt)("inlineCode",{parentName:"p"},"portalProps")," \u5c5e\u6027\uff0c\u6570\u636e\u7ed3\u6784\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { NavigateFunction } from 'react-router-dom';\n\ninterface PortalProps {\n  portalName: 'admin' | 'tenant'; // \u5f53\u524d\u8fd0\u884c\u5728\u4ec0\u4e48 portal\n  client: {\n    themeName: string; // \u4e3b\u9898\u540d\u79f0\n    theme: Record<string, any>; // \u4e3b\u9898\n    tenantInfo: TenantInfo; // \u79df\u6237\u4fe1\u606f\n    tokenInfo: TokenInfo; // token \u4fe1\u606f\n    toast: ToastFunction; // \u663e\u793a toast \u63d0\u793a\u51fd\u6570\uff0c\u6bd4\u5982\u63d0\u793a\u64cd\u4f5c\u6210\u529f\u3001\u5931\u8d25\u7b49\n    navigate: NavigateFunction; // portal \u8def\u7531\u8df3\u8f6c\u51fd\u6570\uff0c\u6bd4\u5982\u8981\u8de8\u63d2\u4ef6\u8df3\u8f6c\n    refetchMenus: () => void; // \u5237\u65b0\u83dc\u5355\u51fd\u6570\n  };\n  backend: {\n    api: {\n      origin?: string; // \u540e\u7aef API \u7684 origin\n      basePath: string; // \u540e\u7aef API \u7684 basePath\n    };\n    websocket: {\n      origin?: string; // \u540e\u7aef WebSocket \u7684 origin\n      basePath: string; // \u540e\u7aef WebSocket \u7684 basePath\n    };\n  };\n}\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"interface TenantInfo {\n  tenant_id: string;\n}\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"interface TokenInfo {\n  access_token: string;\n  expires_in: string;\n  refresh_token: string;\n  token_type: string;\n}\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { ReactNode, ReactText } from 'react';\nimport {\n  ToastContent as ToastifyToastContent,\n  ToastOptions as ToastifyToastOptions,\n  TypeOptions,\n} from 'react-toastify';\n\ntype ToastContent = Exclude<ToastifyToastContent, Record<string, never>>;\n\ninterface ToastOptions extends Omit<ToastifyToastOptions, 'type'> {\n  title: ReactNode;\n  description?: ReactNode;\n  status?: TypeOptions;\n}\n\ntype ToastFunctionArg1 = ToastOptions | ToastContent;\n\ntype ToastFunctionArg2 = Omit<ToastOptions, 'title' | 'description'>;\n\ninterface ToastBaseFunction {\n  (options: ToastOptions): ReactText;\n  (content: ToastContent, options?: ToastFunctionArg2): ReactText;\n}\n\ninterface ToastFunction extends ToastBaseFunction {\n  info: ToastBaseFunction;\n  success: ToastBaseFunction;\n  warning: ToastBaseFunction;\n  error: ToastBaseFunction;\n}\n")),(0,o.kt)("h2",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),(0,o.kt)("h3",{id:"react"},"React"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/tkeel-io/console"},"console \u4ed3\u5e93")," \u4e2d ",(0,o.kt)("inlineCode",{parentName:"p"},"packages")," \u76ee\u5f55\u4e0b\uff0c\u4ee5 ",(0,o.kt)("inlineCode",{parentName:"p"},"tkeel-console-plugin")," \u5f00\u5934\u7684\u76ee\u5f55\uff0c\u90fd\u662f tKeel \u7684\u5b98\u65b9\u63d2\u4ef6\u3002"),(0,o.kt)("h3",{id:"vuejs"},"Vue.js"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/tkeel-io/console-plugin-vue-example"},"console-plugin-vue-example")))}c.isMDXComponent=!0}}]);