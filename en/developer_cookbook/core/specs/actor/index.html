<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developer_cookbook/core/specs/actor">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<script src="https://hm.baidu.com/hm.js?fd45d3e0a66aec212c9e87dcf4b45160" async></script><title data-rh="true">Actor | tKeel</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.tkeel.io/en/developer_cookbook/core/specs/actor"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Actor | tKeel"><meta data-rh="true" name="description" content="Actor"><meta data-rh="true" property="og:description" content="Actor"><link data-rh="true" rel="icon" href="/en/images/tkeel-logo-mark.svg"><link data-rh="true" rel="canonical" href="https://docs.tkeel.io/en/developer_cookbook/core/specs/actor"><link data-rh="true" rel="alternate" href="https://docs.tkeel.io/en/developer_cookbook/core/specs/actor" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tkeel.io/developer_cookbook/core/specs/actor" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://docs.tkeel.io/developer_cookbook/core/specs/actor" hreflang="x-default"><link rel="stylesheet" href="/en/assets/css/styles.716c939b.css">
<link rel="preload" href="/en/assets/js/runtime~main.d85d53fe.js" as="script">
<link rel="preload" href="/en/assets/js/main.ae3fee5c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/images/tkeel-logo-type-dark.svg" alt="tKeel" class="themedImage_ToTc themedImage--light_HNdA" height="28" width="149"><img src="/en/images/tkeel-logo-type-dark.svg" alt="tKeel" class="themedImage_ToTc themedImage--dark_i4oU" height="28" width="149"></div></a><a class="navbar__item navbar__link" href="/en/getting_started/guide">新手引导</a><a class="navbar__item navbar__link" href="/en/api/Core/tag">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tkeel-io/tkeel" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/">什么是 tKeel ?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/en/internal_concepts/platform">🏆 概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/en/getting_started/guide">🏁 开始行动</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/en/developer_cookbook/core/getting_started">📚 开发者手册</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/en/developer_cookbook/core/getting_started">Core</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/getting_started">快速入门</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/en/developer_cookbook/core/introduction/architecture">介绍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/en/developer_cookbook/core/tutorial/iot-create-entity-from-model">教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/en/developer_cookbook/core/specs/entity">模块设计</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/entity">实体</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/mapper">映射</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/model">模型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/relationship">关系</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/developer_cookbook/core/specs/actor">Actor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/channel">Channel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/persistent-strategy">数据持久化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/interfaces">Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/api-special-parameter">API Special Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/proxy">Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/dispatch">Dispatch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/event">Event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/developer_cookbook/core/specs/cache">Cache</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/en/developer_cookbook/tkeel_plugin/overview">tKeel 插件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/en/developer_cookbook/security/SECURITY-001-how_designed">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/en/developer_cookbook/device/devices/device">Devices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/en/developer_cookbook/tools/do_not_repeat_youself">开发者工具</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/en/developer_cookbook/iothub/getting_started">iothub</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/roadmap">🗺️ Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/FQA">🤔 答疑</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/en/develop_guide/before_develop/overview">📖开发指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/en/api/api_usage">🔎 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/en/base">🏁 解决方案</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">📚 开发者手册</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">模块设计</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Actor</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Actor</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="actor">Actor<a class="hash-link" href="#actor" title="Direct link to heading">​</a></h2><blockquote><p><code>Actor</code> 是 <a href="/en/developer_cookbook/core/specs/entity">实体（Entity）</a> 在运行时的模式抽象, 用于维护实体的实时状态和提供实体的具体行为。</p></blockquote><blockquote><p>下文中的 <code>消息</code> 和 <code>事件</code> 在此文中作同义。</p></blockquote><blockquote><p>为了避免歧义， <code>实体</code> 将采用英文 <code>entity</code> 表示。 </p></blockquote><p>一个 Actor 指的是一个最基本的计算单元。 </p><p>它能接收一个消息并且基于其执行计算。在我们的设计中 Actor 由三部分组成：</p><ul><li>mailbox</li><li>state</li><li>coroutine</li></ul><p>mailbox 是 Actor 的信箱，数据结构是一个简单的消息队列,用于接受外部输入；state 是 Actor 自身状态描述；coroutine 是 Actor 附着协程。</p><p><img loading="lazy" alt="actor-consistents" src="data:image/png;base64,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" width="289" height="169" class="img_ev3q"></p><p>外部发送消息到 mailbox， Actor 从 mailbox 获取到消息并执行消息，然后更新自身状态。</p><p><img loading="lazy" alt="dispatch-message-to-actor" src="/en/assets/images/dispatch-msg-to-actor-75e7a0cf1268933619744f6fbb7921df.png" width="584" height="360" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="执行流程分析">执行流程分析<a class="hash-link" href="#执行流程分析" title="Direct link to heading">​</a></h3><ol><li>Actor 被创建，初始化 Actor，同时运行 Actor 内 coroutine。</li><li>外部消息异步发送到 Actor 的 mailbox，mailbox 接受到消息触发 Actor 唤醒内部对应的 coroutine。</li><li>唤醒的 coroutine 消费 mailbox，执行计算并更新自身 <code>状态（state）</code>。</li><li>coroutine 消费完 mailbox 内所有消息后进入阻塞状态等待唤醒。</li><li>重复 2-4 过程。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reactor">Reactor<a class="hash-link" href="#reactor" title="Direct link to heading">​</a></h2><blockquote><p>Don&#x27;t call us, we&#x27;ll call you. </p></blockquote><blockquote><p>Reactor 模式是一种典型的事件驱动的编程模型。
Reactor 逆置了程序处理的流程。事件驱动模型是一个状态机，包含了状态(state), 输入事件(input-event), 状态转移(transition), 状态转移即状态到输入事件的一组映射。</p></blockquote><p><img loading="lazy" alt="state-marchine-consistents" src="data:image/png;base64,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" width="389" height="185" class="img_ev3q"></p><p><code>State Marchine</code> 通过注册的回调来接受消息并更新自身状态。</p><p><img loading="lazy" alt="dispatch-message-to-reactor" src="data:image/png;base64,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" width="531" height="290" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="执行流程分析-1">执行流程分析<a class="hash-link" href="#执行流程分析-1" title="Direct link to heading">​</a></h3><ol><li>创建并初始化状态机。</li><li><code>State Marchine Pool</code> 从 <code>Message Queue</code> 消费到一条事件。</li><li>根据事件拿到事件对应的 <code>State Marchine</code> 的上下文。</li><li>以事件为输入执行 <code>State Marchine</code> 注册的回调， 完成 <code>State Marchine</code> 的状态更新。</li><li>重复执行 2-4 过程。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="actor--reactor">Actor &amp; Reactor<a class="hash-link" href="#actor--reactor" title="Direct link to heading">​</a></h2><ol><li><p>每个 Actor 都有自己的 mailbox，所以消息的处理不会直接在 Queue 处阻塞，大大的提高高消息的并发处理性能。</p></li><li><p>每个 Actor 都拥有一个自己的 coroutine，但是在 <em>IoT</em> 场景下各个 Actor 的消息频率是不同的，部分 Actor 会过载，部分 Actor 会非常活跃，而部分 Actor 不会活跃，因为负载不同会导致：</p><ul><li><em>操作系统</em> 对 Actor 的工作负载是无感知的。所以对每一个 Actor 中的 coroutine 调度是没有区别的，这样会导致许多的无效调度，coroutine 负载不均衡，空耗 CPU 资源。</li><li>不活跃的 Actor 可能导致 Actor 在分布式系统中频繁的调度。</li></ul></li><li><p>reactor 使用 <code>coroutine pool</code> 配合 <code>State Machine</code> 的模式实现，pool 可以使得 coroutine 的调度是 <u>有效的且均衡的</u>，提高 coroutine 在 CPU 时间片的使用效率。</p></li><li><p>reactor 消费从 Queue 消费消息，并使用 <code>coroutine pool</code> 实现并发计算（concurrency），可能存在多个 coroutine 阻塞在同一个 <code>State Machine</code>上，从而降低 coroutine 的使用效率。</p></li><li><p>reactor 使用 <code>coroutine pool</code> 来顺序消费 Queue，相对而言其并发处理效率较之 Actor 更低。</p></li><li><p>reactor 模式下消息出 Queue 之后，事件被回调函数执行是乱序的。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="流数据处理分析">流数据处理分析<a class="hash-link" href="#流数据处理分析" title="Direct link to heading">​</a></h2><p><code>Message Queue</code> 的消费是顺序的，我们想要并发处理这些消息，就需要虚拟一个 <code>Window</code> 来标记 <code>处理中</code> 的消息。 这个窗口的大小和并发性挂钩。
在上面的讨论到的 Actor 模式中 <em>Window-Size</em> 是所有 mailbox 的数量和。在 <code>Reactor</code> 模式中 <code>Window-Size</code> 是 <code>coroutine</code> 的数量。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="entity-runtime">Entity Runtime<a class="hash-link" href="#entity-runtime" title="Direct link to heading">​</a></h2><p>设计目标：</p><ul><li>高并发</li><li>消息可靠，对于消息丢失有尽量小的容忍度。</li><li>coroutine 负载均衡。</li></ul><p>为了获得更好的 <em>并发性</em> 和 <em>协程负载均衡</em>，我们结合 Actor 和 Reactor 对 Entity 运行时做出如下定义：</p><p><img loading="lazy" alt="entity-runtime" src="data:image/png;base64,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" width="386" height="217" class="img_ev3q"></p><p>在此定义中，为 mailbox 获得更好的并发性，去掉固定的 coroutine, 以 <code>coroutine pool</code> 实现 coroutine 的动态分配，规避负载不均衡。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="消息处理模块概览">消息处理模块概览：<a class="hash-link" href="#消息处理模块概览" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="entity-runtime-arch" src="/en/assets/images/entity-runtime-arch-c935d1fd7510493fb1aeb3bcea52189d.png" width="536" height="381" class="img_ev3q">
上图中组成部分有：<code>Entity Manager</code>，<code>Dispatcher</code>,<code>Coroutine Pool</code>, <code>Entity</code>。</p><ul><li><strong>Entity</strong>：Entity存在两种状态， <code>attatched</code>, <code>detatched</code>，当 coroutine 与 Entity 结合的时候 Entity 为 attached 状态，当 coroutine 与 Entity 分离的时候 Entity 为 detached 状态，简单看来 Entity 可以在 actor 和<code>state marchine</code>之间切换。</li><li><strong>Entity Manager</strong>：Entity Manager 是管理一个服务实例内的所有的Entity。</li><li><strong>Dispatcher</strong>： Dispatcher 是从<code>Message Queue</code>的<code>mailbox</code>之间的一个消息分发器。</li><li><strong>Coroutine Pool</strong>: Coroutine Pool 是 coroutinev的管理器，主要提供 coroutine 上任务的负载均衡。
<img loading="lazy" alt="dispatch-msg-to-mailbox" src="data:image/png;base64,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" width="516" height="370" class="img_ev3q"></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="entity-attach">Entity Attach<a class="hash-link" href="#entity-attach" title="Direct link to heading">​</a></h4><p>Entity Attach 流程图如下：</p><p><img loading="lazy" alt="entity-runtime-attached" src="/en/assets/images/entity-runtime-attached-07974b03c76f771af911fa0368c59fb6.png" width="610" height="732" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="entity-数据持久化">Entity 数据持久化<a class="hash-link" href="#entity-数据持久化" title="Direct link to heading">​</a></h2><p>Entity 数据落盘的时候需要针对不同的数据来进行存储的，可以分为 <code>时序</code> 和 <code>属性</code>。</p><p><img loading="lazy" alt="entity-tseries-property-store" src="/en/assets/images/entity-tseries-property-store-e3c755f66f85b95355c8e7e02fcc892b.png" width="578" height="632" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="属性数据持久化">属性数据持久化<a class="hash-link" href="#属性数据持久化" title="Direct link to heading">​</a></h3><ul><li>对于属性数据的落盘，我们对属性实现一个变更数据 <code>Buffer</code>，当 Buffer 满溢我们对窗口内的所有属性进行存储，此外我们也采用定时落盘策略，定时对 Buffer 进行落盘，以保证属性的存储一致性和实时性。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="时序数据持久化">时序数据持久化<a class="hash-link" href="#时序数据持久化" title="Direct link to heading">​</a></h3><ul><li>对于时序数据的落盘，我们对时序实现一个变更数据的 <code>Batch Queue</code>，当 <code>Batch Queue</code> 满溢是我们对时序数据进行存储，此外我们也采用定时刷盘策略，定时对 <code>Batch Queue</code> 刷盘，以保证时序数据存储的一致性和实时性。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="entity-数据查询">Entity 数据查询<a class="hash-link" href="#entity-数据查询" title="Direct link to heading">​</a></h2><blockquote><p>数据查询我们从三个需求角度切入：属性查询，时序查询，实体查询。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="属性查询">属性查询<a class="hash-link" href="#属性查询" title="Direct link to heading">​</a></h3><p>属性数据查询从两个角度查询：最新属性查询，属性数据库查询。
最新属性数据查询直接从 <code>Actor</code> 查询数据，属性数据库查询从属性存储的数据库查询数据。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="时序查询">时序查询<a class="hash-link" href="#时序查询" title="Direct link to heading">​</a></h3><p>时序数据查询从两个家督查询：最新时序查询，时序数据数据库查询。
最新时序数据查询直接从 <code>Actor</code> 查询最新的数据，时序数据库查询从存储时序数据库查询数据。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="实体查询">实体查询<a class="hash-link" href="#实体查询" title="Direct link to heading">​</a></h3><p>实体查询直接从 <code>Actor</code> 查询实体的完整数据。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="属性数据的顺序性">属性数据的顺序性<a class="hash-link" href="#属性数据的顺序性" title="Direct link to heading">​</a></h2><p>对于包含时序数据的系统而言，我们对于时序数据的顺序性一定是需要得到保证的，但是顺序性和并发性是存在性能取舍的。</p><p>对于时序数据对实体的更新顺序，存在以下可能：</p><ol><li>消息流中的事件消息处理和<code>映射</code>数据传递乱序。</li></ol><p><img loading="lazy" alt="entity-tseries-order1" src="data:image/png;base64,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" width="611" height="353" class="img_ev3q"></p><ol start="2"><li>消息流中的事件消息处理和<code>映射</code>数据传递没有乱序。</li></ol><p><img loading="lazy" alt="entity-tseries-order2" src="data:image/png;base64,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" width="588" height="348" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="关系和映射">关系和映射<a class="hash-link" href="#关系和映射" title="Direct link to heading">​</a></h2><p><code>关系</code>和<code>映射</code>的逻辑，我觉得可以使用两个逻辑层面来表达这两种东西。</p><p><img loading="lazy" alt="relationshi-mapper-planes" src="data:image/png;base64,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" width="687" height="420" class="img_ev3q"></p><p><strong>实体与实体之间的关系：</strong></p><p><img loading="lazy" alt="entities-relationships" src="/en/assets/images/entities-relationships-43f2a97f33a1ce80f7dc1035d7b9b0ee.png" width="615" height="482" class="img_ev3q"></p><p><strong>实体与实体之间的数据映射：</strong></p><p><img loading="lazy" alt="entities-data-mapping" src="/en/assets/images/entities-data-mapping-9e3e9303445f5005613249bb724ea055.png" width="632" height="480" class="img_ev3q"></p><p><strong>实体关系和实体数据映射：</strong></p><p><img loading="lazy" alt="entities-relationships-data-mapping" src="/en/assets/images/entities-relationships-data-mapping-34597166d069ad947ea8578eabb4324f.png" width="654" height="496" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/tkeel-io/docs/tree/main/docs/developer_cookbook/core/specs/actor.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-12-02T08:36:03.000Z">Dec 2, 2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/developer_cookbook/core/specs/relationship"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">关系</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/developer_cookbook/core/specs/channel"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Channel</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#actor" class="table-of-contents__link toc-highlight">Actor</a><ul><li><a href="#执行流程分析" class="table-of-contents__link toc-highlight">执行流程分析</a></li></ul></li><li><a href="#reactor" class="table-of-contents__link toc-highlight">Reactor</a><ul><li><a href="#执行流程分析-1" class="table-of-contents__link toc-highlight">执行流程分析</a></li></ul></li><li><a href="#actor--reactor" class="table-of-contents__link toc-highlight">Actor &amp; Reactor</a></li><li><a href="#流数据处理分析" class="table-of-contents__link toc-highlight">流数据处理分析</a></li><li><a href="#entity-runtime" class="table-of-contents__link toc-highlight">Entity Runtime</a></li><li><a href="#entity-数据持久化" class="table-of-contents__link toc-highlight">Entity 数据持久化</a><ul><li><a href="#属性数据持久化" class="table-of-contents__link toc-highlight">属性数据持久化</a></li><li><a href="#时序数据持久化" class="table-of-contents__link toc-highlight">时序数据持久化</a></li></ul></li><li><a href="#entity-数据查询" class="table-of-contents__link toc-highlight">Entity 数据查询</a><ul><li><a href="#属性查询" class="table-of-contents__link toc-highlight">属性查询</a></li><li><a href="#时序查询" class="table-of-contents__link toc-highlight">时序查询</a></li><li><a href="#实体查询" class="table-of-contents__link toc-highlight">实体查询</a></li></ul></li><li><a href="#属性数据的顺序性" class="table-of-contents__link toc-highlight">属性数据的顺序性</a></li><li><a href="#关系和映射" class="table-of-contents__link toc-highlight">关系和映射</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/">什么是 tKeel</a></li><li class="footer__item"><a class="footer__link-item" href="/en/internal_concepts/platform">概念</a></li><li class="footer__item"><a class="footer__link-item" href="/en/getting_started/guide">新手引导</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/tkeel-io/tkeel" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 tKeel. Built with Docusaurus.</div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.d85d53fe.js"></script>
<script src="/en/assets/js/main.ae3fee5c.js"></script>
</body>
</html>